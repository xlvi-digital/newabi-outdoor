<!DOCTYPE html>
<html lang="en" x-data="productPage()">
  <head>
    <meta charset="UTF-8" />
    <link rel="shortcut icon" href="images/logo (1).png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- My Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />
    <!-- Box Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css" />
    <!-- SweetAlert -->
    <link rel="stylesheet" href="assets/sweetalert2/sweetalert2.min.css" />
    <!-- My CSS -->
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="responsive.css" />
    <script>
      document.addEventListener("alpine:init", () => {
        Alpine.store("cart", {
          items: JSON.parse(localStorage.getItem("cartItems") || "[]"),
          get count() {
            return this.items.reduce((acc, p) => acc + p.quantity, 0);
          },
          add(product) {
            const existing = this.items.find((p) => p.id === product.id);
            if (existing) {
              existing.quantity += product.quantity || 1;
            } else {
              this.items.push({ ...product, quantity: product.quantity || 1 });
            }
            this.save();
          },
          remove(id) {
            this.items = this.items.filter((p) => p.id !== id);
            this.save();
          },
          save() {
            localStorage.setItem("cartItems", JSON.stringify(this.items));
          },
          clear() {
            this.items = [];
            this.save();
          },
        });
      });
    </script>

    <title>NEWABI OUTDOOR | Home</title>
  </head>

  <body>
    <!-- Navbar -->
    <div class="container">
      <div class="navbar" x-data="cartBadge()">
        <div class="logo">
          <img src="img/logo/newabi-logo.png" width="125px" />
        </div>
        <nav>
          <ul id="menuItems">
            <li><a href="index.html">Home</a></li>
            <li><a href="products.html">Product</a></li>
            <li><a href="https://masreyxlvi.github.io/newabioutdoor/" target="_blank">About</a></li>
            <li><a href="">Contact</a></li>
            <li><a href="">Account</a></li>
          </ul>
        </nav>
        <!-- Cart Icon -->
        <div class="cart-icon">
          <a href="cart.html">
            <img src="images/cart.png" width="30px" height="30px" alt="cart" class="cart" />
            <span class="cart-badge" x-text="cartCount">0</span>
          </a>
        </div>
        <img src="images/menu.png" class="menu-icon" onclick="menuToggle()" />
      </div>
    </div>

    <!-- Header -->
    <header class="header">
      <div class="container">
        <div class="row">
          <div class="col-2">
            <h1>Siap untuk <br />Petualangan Baru?</h1>
            <p>Nikmati pengalaman alam terbaik dengan perlengkapan camping lengkap dari <b>Newabi Outdoor</b>. Temukan tenda, carrier, lampu, hingga alat masak dengan kualitas terbaik.</p>
            <a href="products.html" class="btn">Sewa Sekarang &#8594;</a>
          </div>
          <div class="col-2">
            <img src="images/bg.png" alt="home" />
          </div>
        </div>
      </div>
    </header>

    <!-- Featured Categories -->
    <section id="categories" class="categories">
      <div class="small-container">
        <div class="row">
          <div class="col-3"><img src="img/hero/1.jpg" alt="category" /></div>
          <div class="col-3"><img src="img/hero/2.jpg " alt="category" /></div>
          <div class="col-3"><img src="img/hero/3.jpg" alt="category" /></div>
        </div>
      </div>
    </section>

    <!-- Featured Products -->
    <div class="small-container">
      <h2 class="title">Featured Products</h2>
      <div class="row">
        <template x-for="(item, index) in featuredProducts" :key="index">
          <div class="col-4">
            <a :href="`single-product.html?id=${item.id}`">
              <img :src="item.img" alt="Product Image" class="product-img" />
            </a>
            <h4 x-text="item.name"></h4>
            <p x-text="rupiah(item.price) + ' / Hari'"></p>
            <a @click.prevent="addToCart(item, 1)" class="btn" style="font-size: 0.8rem; margin-top: 15px">Add to Cart</a>
          </div>
        </template>
      </div>

      <h2 class="title">Latest Products</h2>
      <div class="row">
        <template x-for="(item, index) in latestProducts" :key="index">
          <div class="col-4">
            <a :href="`single-product.html?id=${item.id}`">
              <img :src="item.img" alt="Product Image" class="product-img" />
            </a>
            <h4 x-text="item.name"></h4>
            <p x-text="rupiah(item.price) + ' / Hari'"></p>
            <a @click.prevent="addToCart(item, 1)" class="btn" style="font-size: 0.8rem; margin-top: 15px">Add to Cart</a>
          </div>
        </template>
      </div>
    </div>

    <!-- Offer -->
    <section id="offer" class="offer">
      <div class="small-container">
        <div class="row">
          <div class="col-2"><img src="img/hero/sampul newabi.png" alt="exclusive" class="offer0img" /></div>
          <div class="col-2">
            <p>Jadilah Bagian dari Kami</p>
            <h1>Join Member Newabi Outdoor</h1>
            <small> Dapatkan diskon hingga <b>20%</b> untuk penyewaan pertama, akses promo eksklusif, dan kemudahan transaksi hanya untuk member terdaftar. Bergabung sekarang dan jadilah bagian dari komunitas pecinta alam!</small>
            <a href="#" class="btn">Join Now &#8594;</a>
          </div>
        </div>
      </div>
    </section>
    <!-- Testimonial -->
    <section id="testimonial" class="testimonial">
      <div class="small-container">
        <div class="row">
          <div class="col-3">
            <i class="bx bxs-quote-alt-left"></i>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Rem odio ullam, voluptates asperiores magnam eius.</p>
            <div class="rating"><i class="bx bxs-star"></i> <i class="bx bxs-star"></i> <i class="bx bxs-star"></i> <i class="bx bx-star"></i></div>
            <img src="images/user-1.png" alt="User 1" />
            <h3>Alexsa Parker</h3>
          </div>
          <div class="col-3">
            <i class="bx bxs-quote-alt-left"></i>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Rem odio ullam, voluptates asperiores magnam eius.</p>
            <div class="rating"><i class="bx bxs-star"></i> <i class="bx bxs-star"></i> <i class="bx bxs-star"></i> <i class="bx bx-star"></i></div>
            <img src="images/user-2.png" alt="User 1" />
            <h3>Mike Tyson</h3>
          </div>
          <div class="col-3">
            <i class="bx bxs-quote-alt-left"></i>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Rem odio ullam, voluptates asperiores magnam eius.</p>
            <div class="rating"><i class="bx bxs-star"></i> <i class="bx bxs-star"></i> <i class="bx bxs-star"></i> <i class="bx bx-star"></i></div>
            <img src="images/user-3.png" alt="User 1" />
            <h3>Maria Json</h3>
          </div>
        </div>
      </div>
    </section>
    <!-- Brands -->
    <section id="brands" class="brands">
      <div class="small-container">
        <div class="row">
          <div class="col-5"><img src="images/logo-coca-cola.png" alt="coca cola" /></div>
          <div class="col-5"><img src="images/logo-godrej.png" alt="Godrej" /></div>
          <div class="col-5"><img src="images/logo-oppo.png" alt="oppo" /></div>
          <div class="col-5"><img src="images/logo-paypal.png" alt="Paypal" /></div>
          <div class="col-5"><img src="images/logo-philips.png" alt="philips" /></div>
        </div>
      </div>
    </section>

    <div class="footer">
      <div class="container">
        <div class="row">
          <div class="footer-col-1">
            <h3>Tentang Kami</h3>
            <p>Newabi Outdoor adalah penyedia jasa rental alat camping & adventure gear terpercaya sejak 2024.</p>
          </div>
          <div class="footer-col-2">
            <img src="img/logo/newabi-logo.png" alt="Newabi Outdoor" />
            <p>Petualangan dimulai dari sini.</p>
          </div>
          <div class="footer-col-3">
            <h3>Ikuti Kami</h3>
            <ul>
              <li>Instagram</li>
              <li>TikTok</li>
              <li>WhatsApp</li>
            </ul>
          </div>
        </div>
        <hr />
        <p class="copyright">© 2024 Newabi Outdoor — Sewa Alat Camping Lengkap untuk Setiap Petualangan</p>
      </div>
    </div>

    <!-- Scripts -->
    <script src="script.js"></script>
    <script src="assets/jquery.js"></script>
    <script src="assets/app.js"></script>
    <script src="assets/sweetalert2/sweetalert2.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <script>
      function cartBadge() {
        return {
          cartCount: 0,
          init() {
            // Hitung jumlah item dari localStorage saat halaman load
            this.updateBadge();
            // Listen jika ada event cart-updated
            window.addEventListener("cart-updated", () => this.updateBadge());
          },
          updateBadge() {
            const cartItems = JSON.parse(localStorage.getItem("cartItems") || "[]");
            this.cartCount = cartItems.reduce((acc, item) => acc + item.quantity, 0);
          },
        };
      }
      // Toggle Menu
      var menuItems = document.getElementById("menuItems");
      menuItems.style.maxHeight = "0px";
      function menuToggle() {
        menuItems.style.maxHeight = menuItems.style.maxHeight === "0px" ? "200px" : "0px";
      }

      // Alpine Product Page
      function productPage() {
        return {
          itemsByCategory: {
            items: [
              { id: 1, name: "Big Dome 6 Pro", img: "img/product/tenda/2.jpg", price: 75000 },
              { id: 2, name: "Easy Dome 2", img: "img/product/tenda/3.jpg", price: 20000 },
              { id: 3, name: "Bespot", img: "img/product/tenda/4.jpg", price: 35000 },
              { id: 4, name: "Borneo 3", img: "img/product/tenda/5.jpg", price: 40000 },
              { id: 5, name: "Borneo 4", img: "img/product/tenda/1.jpg", price: 50000 },
              { id: 6, name: "Daypack", img: "img/product/carrier/2.jpg", price: 10000 },
              { id: 7, name: "Sunature Futura Pro", img: "img/product/carrier/3.jpg", price: 20000 },
              { id: 8, name: "Deuter Futura 32", img: "img/product/carrier/4.jpg", price: 35000 },
              { id: 9, name: "Osprey Kestrey 48", img: "img/product/carrier/1.jpg", price: 40000 },
              { id: 10, name: "Kompor Kotak", img: "img/product/masak/masak1.jpg", price: 12000 },
              { id: 11, name: "Kompor Mawar", img: "img/product/masak/masak2.jpg", price: 15000 },
              { id: 12, name: "Kompor Koper", img: "img/product/masak/masak3.jpg", price: 20000 },
              { id: 13, name: "Cooking Seet 200", img: "img/product/masak/masak4.jpg", price: 12000 },
              { id: 14, name: "Cooking Seet 308", img: "img/product/masak/masak5.jpg", price: 15000 },
              { id: 15, name: "Gas Portable Refil", img: "img/product/masak/masak6.jpg", price: 8000 },
              { id: 16, name: "HeadLamp", img: "img/product/penerangan/penerangan1.jpg", price: 8000 },
              { id: 17, name: "Headlamp Electric", img: "img/product/penerangan/penerangan2.jpg", price: 10000 },
              { id: 18, name: "Lampu Tenda", img: "img/product/penerangan/penerangan3.jpg", price: 8000 },
              { id: 19, name: "Sleping Bag", img: "img/product/pribadi/pribadi1.jpg", price: 8000 },
              { id: 20, name: "Tracking Pole", img: "img/product/pribadi/pribadi2.jpg", price: 10000 },
              { id: 21, name: "Sarung Tangan", img: "img/product/pribadi/pribadi3.jpg", price: 10000 },
              { id: 22, name: "Sepatu Tracking", img: "img/product/pribadi/pribadi4.jpg", price: 25000 },
              { id: 23, name: "Matras Spons", img: "img/product/tambahan/tambahan1.jpg", price: 5000 },
              { id: 24, name: "Matras Lipat Spons", img: "img/product/tambahan/tambahan2.jpg", price: 10000 },
              { id: 25, name: "Flysheet", img: "img/product/tambahan/tambahan3.jpg", price: 15000 },
              { id: 26, name: "Meja & Kursi Lipat", img: "img/product/tambahan/tambahan4.jpg", price: 15000 },
            ],
          },
          featuredProducts: [],
          latestProducts: [],
          init() {
            // inisialisasi featured dan latest products
            this.featuredProducts = this.itemsByCategory.items.slice(0, 4);
            this.latestProducts = this.itemsByCategory.items.slice(-8);
          },
          addToCart(item, qty = 1) {
            if (!window.Alpine.store("cart")) {
              window.Alpine.store("cart", {
                items: [],
                count: 0,
                add(product) {
                  const exist = this.items.find((i) => i.id === product.id);
                  if (exist) {
                    exist.quantity += 1;
                  } else {
                    this.items.push({ ...product, quantity: 1 });
                  }
                  this.count = this.items.reduce((acc, i) => acc + i.quantity, 0);
                },
              });
            }
            window.Alpine.store("cart").add({ ...item, quantity: qty });
            Swal.fire("Success", "Product added to cart", "success");
          },
          rupiah(val) {
            return "Rp " + val.toLocaleString("id-ID");
          },
        };
      }
    </script>
  </body>
</html>
